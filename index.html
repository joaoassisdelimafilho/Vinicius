<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Fazenda São Sebastião - BI Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --bg-body: #0a1929; --bg-card: #132f4c; --neon-cyan: #00f2ff;
            --neon-danger: #ff4b66; --text-white: #ffffff; --text-dim: #b2bac2;
            --border-card: rgba(255, 255, 255, 0.1);
        }
        html, body { height: 100vh; overflow: hidden; margin: 0; padding: 0; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg-body); color: var(--text-white); padding: 8px; display: flex; flex-direction: column; box-sizing: border-box; }

        /* Top Bar */
        .top-bar { display: flex; justify-content: space-between; align-items: center; background: var(--bg-card); padding: 5px 20px; border-radius: 10px; margin-bottom: 5px; border: 1px solid var(--border-card); }
        .logo-area { display: flex; align-items: center; gap: 10px; }
        .logo-box { width: 35px; height: 35px; border: 1px solid var(--neon-cyan); border-radius: 5px; overflow: hidden; }
        .logo-box img { width: 100%; height: 100%; object-fit: contain; }
        .top-bar h1 { margin: 0; font-size: 14px; color: var(--neon-cyan); letter-spacing: 1px; text-transform: uppercase; }
        
        .filtros { display: flex; gap: 8px; align-items: center; }
        .filtros input { background: #07192e; border: 1px solid #265d97; color: white; padding: 3px 6px; border-radius: 4px; font-size: 10px; }

        /* Painel Global */
        .painel-global { background: linear-gradient(135deg, #132f4c 0%, #0a1929 100%); padding: 10px 20px; border-radius: 10px; margin-bottom: 5px; display: flex; align-items: center; gap: 20px; border: 1px solid var(--border-card); }
        .global-info { flex: 2; }
        .global-perda-area { flex: 1.2; display: flex; align-items: center; justify-content: flex-end; gap: 15px; border-left: 1px solid #265d97; padding-left: 15px; }
        .global-perda-texto p { margin: 0; font-size: 22px; font-weight: bold; color: var(--neon-danger); }
        .global-perda-texto h2, .global-info h2 { margin: 0; font-size: 9px; color: var(--text-dim); text-transform: uppercase; }
        .btn-upload { background: var(--neon-cyan); color: #0a1929; text-decoration: none; padding: 5px 12px; border-radius: 5px; font-size: 10px; font-weight: bold; }

        /* Grid Superior */
        .main-content { display: flex; flex-direction: column; gap: 5px; flex-grow: 1; overflow: hidden; }
        .grid-resumo { display: grid; grid-template-columns: repeat(3, 1fr); gap: 5px; flex: 1.8; }
        .card { background: var(--bg-card); padding: 8px; border-radius: 10px; border: 1px solid var(--border-card); display: flex; flex-direction: column; }
        
        /* Tabelas e Barras */
        .container-meta { position: relative; width: 100%; height: 16px; background: #07192e; border-radius: 4px; overflow: hidden; border: 1px solid #265d97; }
        .barra-preenchimento { height: 100%; transition: width 0.8s ease; display: flex; align-items: center; justify-content: center; font-size: 9px; font-weight: bold; color: #000; }
        .mini-tabela { width: 100%; border-collapse: collapse; font-size: 9px; margin-top: 5px; }
        .mini-tabela th { text-align: left; color: var(--text-dim); padding: 2px; border-bottom: 1px solid #265d97; }
        .mini-tabela td { padding: 2px; border-bottom: 1px solid #173a5e; }

        /* Seção Inferior - Onde a mágica acontece */
        .bottom-section { display: flex; gap: 8px; flex: 1.2; min-height: 0; align-items: stretch; }
        .rank-column { flex: 0.6; display: flex; flex-direction: column; gap: 5px; }
        .rank-card { background: #07192e; border-radius: 8px; border: 1px solid #265d97; padding: 8px; flex: 1; }
        .rank-card h4 { margin: 0 0 5px; font-size: 9px; color: var(--neon-cyan); text-transform: uppercase; border-bottom: 1px solid rgba(0, 242, 255, 0.2); padding-bottom: 3px; }
        .rank-item { display: flex; justify-content: space-between; font-size: 10px; margin-bottom: 3px; }
        
        .grafico-grande { flex: 2.5; background: var(--bg-card); border-radius: 10px; border: 1px solid var(--border-card); padding: 10px; }
        
        .txt-erro { color: var(--neon-danger); font-weight: bold; }
        .txt-ok { color: var(--neon-cyan); font-weight: bold; }
    </style>
</head>
<body>
    <div class="top-bar">
        <div class="logo-area">
            <div class="logo-box"><img src="imagen.jpg"></div>
            <h1>FAZENDA SÃO SEBASTIÃO</h1>
        </div>
        <div class="filtros">
            <input type="date" id="data-inicio">
            <input type="date" id="data-fim">
            <button class="btn-limpar" id="btn-limpar" style="background:none; border:1px solid #265d97; color:#fff; cursor:pointer; border-radius:4px; font-size:10px;">RESET</button>
        </div>
    </div>

    <div class="painel-global">
        <div class="global-info">
            <h2>Eficiência Consolidada (Últimos 60 dias)</h2>
            <div class="container-meta"><div id="barra-global" class="barra-preenchimento">0%</div></div>
        </div>
        <div class="global-perda-area">
            <div class="global-perda-texto"><h2>Prejuízo Total</h2><p id="perda-global">R$ 0,00</p></div>
            <a href="admin.html" class="btn-upload">➕ UPLOAD</a>
        </div>
    </div>

    <div class="main-content">
        <div class="grid-resumo">
            <div class="card" id="card-engorda">
                <div class="container-meta"><div id="barra-engorda" class="barra-preenchimento"></div></div>
                <h3 style="font-size:11px; text-align:center; margin:5px 0;">Engorda</h3>
                <div id="qtd-engorda" style="font-size:8px; text-align:center; color:var(--text-dim);"></div>
                <table class="mini-tabela"><thead><tr><th>ITEM</th><th>PROG</th><th>DISP</th><th>VALOR</th><th>EFIC</th></tr></thead><tbody id="itens-engorda"></tbody></table>
            </div>
            <div class="card" id="card-adaptacao">
                <div class="container-meta"><div id="barra-adaptacao" class="barra-preenchimento"></div></div>
                <h3 style="font-size:11px; text-align:center; margin:5px 0;">Adaptação</h3>
                <div id="qtd-adaptacao" style="font-size:8px; text-align:center; color:var(--text-dim);"></div>
                <table class="mini-tabela"><thead><tr><th>ITEM</th><th>PROG</th><th>DISP</th><th>VALOR</th><th>EFIC</th></tr></thead><tbody id="itens-adaptacao"></tbody></table>
            </div>
            <div class="card" id="card-bezerro">
                <div class="container-meta"><div id="barra-bezerro" class="barra-preenchimento"></div></div>
                <h3 style="font-size:11px; text-align:center; margin:5px 0;">Bezerro</h3>
                <div id="qtd-bezerro" style="font-size:8px; text-align:center; color:var(--text-dim);"></div>
                <table class="mini-tabela"><thead><tr><th>ITEM</th><th>PROG</th><th>DISP</th><th>VALOR</th><th>EFIC</th></tr></thead><tbody id="itens-bezerro"></tbody></table>
            </div>
        </div>

        <div class="bottom-section">
            <div class="rank-column">
                <div class="rank-card"><h4>TOP 6 DESPERDÍCIO (KG)</h4><div id="rank-kg"></div></div>
            </div>
            <div class="grafico-grande">
                <canvas id="graficoEvolucao"></canvas>
            </div>
            <div class="rank-column">
                <div class="rank-card"><h4>TOP 6 PREJUÍZO (R$)</h4><div id="rank-r$"></div></div>
            </div>
        </div>
    </div>
    <script type="module" src="index.js"></script>
</body>
</html>
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Fazenda S√£o Sebasti√£o - BI Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --bg-body: #0a1929; --bg-card: #132f4c; --neon-cyan: #00f2ff;
            --neon-danger: #ff4b66; --text-white: #ffffff; --text-dim: #b2bac2;
            --border-card: rgba(255, 255, 255, 0.1);
        }
        /* Trava o corpo para ocupar sempre 100% da altura da TV */
        html, body { height: 100vh; overflow: hidden; margin: 0; padding: 0; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg-body); color: var(--text-white); padding: 10px; display: flex; flex-direction: column; box-sizing: border-box; }

        .top-bar { display: flex; justify-content: space-between; align-items: center; background: var(--bg-card); padding: 5px 20px; border-radius: 12px; margin-bottom: 8px; border: 1px solid var(--border-card); flex-shrink: 0; }
        .logo-area { display: flex; align-items: center; gap: 15px; }
        .logo-box { width: 45px; height: 45px; border: 1px solid var(--neon-cyan); border-radius: 8px; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        .logo-box img { width: 100%; height: 100%; object-fit: contain; }
        .top-bar h1 { margin: 0; font-size: 18px; color: var(--neon-cyan); text-transform: uppercase; }
        
        .filtros { display: flex; gap: 10px; align-items: center; }
        .filtros input { background: #07192e; border: 1px solid #265d97; color: white; padding: 5px; border-radius: 5px; font-size: 11px; }

        .painel-global { background: linear-gradient(135deg, #132f4c 0%, #0a1929 100%); padding: 10px 25px; border-radius: 12px; margin-bottom: 8px; display: flex; align-items: center; gap: 30px; border: 1px solid var(--border-card); flex-shrink: 0; }
        .global-info { flex: 2; }
        .global-perda-area { flex: 1.2; text-align: right; border-left: 1px solid #265d97; padding-left: 20px; }
        .global-perda-area p { margin: 0; font-size: 24px; font-weight: bold; color: var(--neon-danger); }
        
        /* Grid de Receitas - Ocupa 45% da altura */
        .grid-resumo { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; height: 45%; margin-bottom: 8px; flex-shrink: 0; }
        .card { background: var(--bg-card); padding: 10px; border-radius: 12px; border: 1px solid var(--border-card); display: flex; flex-direction: column; overflow: hidden; }
        .tabela-scroll { flex-grow: 1; overflow-y: auto; margin-top: 5px; }
        
        .container-meta { position: relative; width: 100%; height: 20px; background: #07192e; border-radius: 5px; overflow: hidden; border: 1px solid #265d97; flex-shrink: 0; }
        .barra-preenchimento { height: 100%; transition: width 0.8s ease; display: flex; align-items: center; justify-content: center; font-size: 10px; font-weight: bold; color: #000; }

        .mini-tabela { width: 100%; border-collapse: collapse; font-size: 10px; }
        .mini-tabela th { position: sticky; top: 0; background: var(--bg-card); text-align: left; color: var(--text-dim); padding: 5px 2px; border-bottom: 1px solid #265d97; z-index: 10; }
        .mini-tabela td { padding: 6px 2px; border-bottom: 1px solid #173a5e; }

        /* √Årea Inferior - ESTICA para preencher o vazio do F11 */
        .bottom-section { display: flex; gap: 8px; flex-grow: 1; min-height: 0; align-items: stretch; }
        .rank-card { flex: 0.6; background: #07192e; border-radius: 10px; border: 1px solid #265d97; padding: 10px; display: flex; flex-direction: column; overflow: hidden; }
        .rank-card h4 { margin: 0 0 8px; font-size: 10px; color: var(--neon-cyan); text-transform: uppercase; border-bottom: 1px solid rgba(0, 242, 255, 0.2); padding-bottom: 4px; flex-shrink: 0; }
        .rank-list { flex-grow: 1; overflow: hidden; }
        .rank-item { display: flex; justify-content: space-between; font-size: 11px; margin-bottom: 5px; }
        
        .grafico-wrapper { flex: 2.2; background: var(--bg-card); border-radius: 12px; border: 1px solid var(--border-card); padding: 15px; position: relative; }
        canvas { width: 100% !important; height: 100% !important; }

        .txt-erro { color: var(--neon-danger); font-weight: bold; }
        .txt-ok { color: var(--neon-cyan); font-weight: bold; }
    </style>
</head>
<body>
    <div class="top-bar">
        <div class="logo-area">
            <div class="logo-box"><img src="imagen.jpg"></div>
            <h1>FAZENDA S√ÉO SEBASTI√ÉO</h1>
        </div>
        <div class="filtros">
            <input type="date" id="data-inicio">
            <input type="date" id="data-fim">
            <button id="btn-reset" style="background:transparent; border:1px solid var(--neon-cyan); color:var(--neon-cyan); padding:5px 12px; border-radius:6px; cursor:pointer; font-size:10px;">RESET</button>
            <a href="admin.html" style="background:var(--neon-cyan); color:#000; padding:6px 12px; border-radius:6px; text-decoration:none; font-size:10px; font-weight:bold;">UPLOAD</a>
        </div>
    </div>

    <div class="painel-global">
        <div class="global-info">
            <div class="container-meta"><div id="barra-global" class="barra-preenchimento">0%</div></div>
        </div>
        <div class="global-perda-area">
            <p id="perda-global">R$ 0,00</p>
        </div>
    </div>

    <div class="grid-resumo">
        <div class="card">
            <div class="container-meta"><div id="barra-engorda" class="barra-preenchimento"></div></div>
            <h3 style="text-align:center; font-size:14px; margin:5px 0;">Engorda</h3>
            <div id="qtd-engorda" style="text-align:center; font-size:9px; color:var(--text-dim);"></div>
            <div class="tabela-scroll">
                <table class="mini-tabela"><thead><tr><th>ITEM</th><th>PROG</th><th>REAL</th><th>DISP</th><th>VALOR</th><th>EFIC</th></tr></thead><tbody id="itens-engorda"></tbody></table>
            </div>
        </div>
        <div class="card">
            <div class="container-meta"><div id="barra-adaptacao" class="barra-preenchimento"></div></div>
            <h3 style="text-align:center; font-size:14px; margin:5px 0;">Adapta√ß√£o</h3>
            <div id="qtd-adaptacao" style="text-align:center; font-size:9px; color:var(--text-dim);"></div>
            <div class="tabela-scroll">
                <table class="mini-tabela"><thead><tr><th>ITEM</th><th>PROG</th><th>REAL</th><th>DISP</th><th>VALOR</th><th>EFIC</th></tr></thead><tbody id="itens-adaptacao"></tbody></table>
            </div>
        </div>
        <div class="card">
            <div class="container-meta"><div id="barra-bezerro" class="barra-preenchimento"></div></div>
            <h3 style="text-align:center; font-size:14px; margin:5px 0;">Bezerro</h3>
            <div id="qtd-bezerro" style="text-align:center; font-size:9px; color:var(--text-dim);"></div>
            <div class="tabela-scroll">
                <table class="mini-tabela"><thead><tr><th>ITEM</th><th>PROG</th><th>REAL</th><th>DISP</th><th>VALOR</th><th>EFIC</th></tr></thead><tbody id="itens-bezerro"></tbody></table>
            </div>
        </div>
    </div>

    <div class="bottom-section">
        <div class="rank-card"><h4>‚ö†Ô∏è TOP 6 DESPERD√çCIO</h4><div id="rank-kg" class="rank-list"></div></div>
        <div class="grafico-wrapper"><canvas id="graficoEvolucao"></canvas></div>
        <div class="rank-card"><h4>üí∏ TOP 6 PREJU√çZO</h4><div id="rank-r$" class="rank-list"></div></div>
    </div>

    <script type="module" src="index.js"></script>
</body>
</html>